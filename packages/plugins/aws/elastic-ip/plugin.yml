name: aws/elastic-ip
version: 0.1.0
provider: aws
description: Allocate Elastic IP
inputs:
  - name: eip_name
    type: string
  - name: instance_id
    type: string
    optional: true
  - name: network_interface_id
    type: string
    optional: true
outputs:
  - name: eip_id
  - name: public_ip
  - name: allocation_id
capabilities:
  - actor: instance-profile
    needs:
      - action: ec2:AllocateAddress
        resource: "*"
      - action: ec2:AssociateAddress
        resource: "*"
name: aws/route-table
version: 0.1.0
provider: aws
description: Manage VPC routing
inputs:
  - name: route_table_name
    type: string
  - name: vpc_id
    type: string
  - name: gateway_id
    type: string
    optional: true
  - name: destination_cidr_block
    type: string
    optional: true
outputs:
  - name: route_table_id
  - name: route_table_arn
dependencies:
  - aws/vpc
  - aws/internet-gateway
capabilities:
  - actor: instance-profile
    needs:
      - action: ec2:CreateRouteTable
        resource: "*"
      - action: ec2:CreateRoute
        resource: "*"
name: aws/internet-gateway
version: 0.1.0
provider: aws
description: Attach internet gateway to VPC for internet access
inputs:
  - name: igw_name
    type: string
  - name: vpc_id
    type: string
outputs:
  - name: igw_id
  - name: igw_arn
dependencies:
  - aws/vpc
capabilities:
  - actor: instance-profile
    needs:
      - action: ec2:CreateInternetGateway
        resource: "*"
      - action: ec2:AttachInternetGateway
        resource: "*"
name: aws/sqs
version: 0.1.0
provider: aws
description: Managed SQS queue with optional DLQ
inputs:
  - name: queue_name
    type: string
  - name: use_dlq
    type: bool
    optional: true
outputs:
  - name: queue_arn
  - name: queue_url
capabilities:
  - actor: lambda
    needs:
      - action: sqs:ReceiveMessage
        resource: ${queue_arn}
      - action: sqs:DeleteMessage
        resource: ${queue_arn}

